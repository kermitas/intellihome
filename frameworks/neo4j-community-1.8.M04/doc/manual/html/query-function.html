<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>16.23. Functions</title><link rel="stylesheet" href="docbook-xsl.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.2" /><link rel="home" href="index.html" title="The Neo4j Manual v1.8.M04" /><link rel="up" href="cypher-query-lang.html" title="Chapter 16. Cypher Query Language" /><link rel="prev" href="query-foreach.html" title="16.22. Foreach" /><link rel="next" href="cypher-compatibility.html" title="16.24. Compatibility" /><link rel="preface" href="preface.html" title="Preface" /><link rel="part" href="introduction.html" title="Part I. Introduction" /><link rel="chapter" href="introduction-highlights.html" title="Chapter 1. Neo4j Highlights" /><link rel="chapter" href="graphdb-concepts.html" title="Chapter 2. Graph Database Concepts" /><link rel="chapter" href="graphdb-neo4j.html" title="Chapter 3. The Neo4j Graph Database" /><link rel="part" href="tutorials.html" title="Part II. Tutorials" /><link rel="chapter" href="tutorials-java-embedded.html" title="Chapter 4. Using Neo4j embedded in Java applications" /><link rel="chapter" href="cypher-cookbook.html" title="Chapter 5. Cypher Cookbook" /><link rel="chapter" href="tutorials-rest.html" title="Chapter 6. Neo4j Remote Client Libraries" /><link rel="chapter" href="server-extending.html" title="Chapter 7. Extending the Neo4j Server" /><link rel="chapter" href="tutorial-traversal.html" title="Chapter 8. The Traversal Framework" /><link rel="chapter" href="domain-modeling-gallery.html" title="Chapter 9. Domain Modeling Gallery" /><link rel="chapter" href="languages.html" title="Chapter 10. Languages" /><link rel="chapter" href="tutorials-python-embedded.html" title="Chapter 11. Using Neo4j embedded in Python applications" /><link rel="part" href="reference-documentation.html" title="Part III. Reference" /><link rel="chapter" href="capabilities.html" title="Chapter 12. Capabilities" /><link rel="chapter" href="transactions.html" title="Chapter 13. Transaction Management" /><link rel="chapter" href="import.html" title="Chapter 14. Data Import" /><link rel="chapter" href="indexing.html" title="Chapter 15. Indexing" /><link rel="chapter" href="cypher-query-lang.html" title="Chapter 16. Cypher Query Language" /><link rel="chapter" href="graph-algo.html" title="Chapter 17. Graph Algorithms" /><link rel="chapter" href="server.html" title="Chapter 18. Neo4j Server" /><link rel="chapter" href="rest-api.html" title="Chapter 19. REST API" /><link rel="chapter" href="python-embedded.html" title="Chapter 20. Python embedded bindings" /><link rel="part" href="operations.html" title="Part IV. Operations" /><link rel="chapter" href="deployment.html" title="Chapter 21. Installation &amp; Deployment" /><link rel="chapter" href="embedded-configuration.html" title="Chapter 22. Configuration &amp; Performance" /><link rel="chapter" href="ha.html" title="Chapter 23. High Availability" /><link rel="chapter" href="operations-backup.html" title="Chapter 24. Backup" /><link rel="chapter" href="operations-security.html" title="Chapter 25. Security" /><link rel="chapter" href="operations-monitoring.html" title="Chapter 26. Monitoring" /><link rel="part" href="tools.html" title="Part V. Tools" /><link rel="chapter" href="tools-webadmin.html" title="Chapter 27. Web Administration" /><link rel="chapter" href="shell.html" title="Chapter 28. Neo4j Shell" /><link rel="part" href="community.html" title="Part VI. Community" /><link rel="chapter" href="community-support.html" title="Chapter 29. Community Support" /><link rel="chapter" href="community-contributing.html" title="Chapter 30. Contributing to Neo4j" /><link rel="appendix" href="manpages.html" title="Appendix A. Manpages" /><link rel="refentry" href="re01.html" title="neo4j" /><link rel="refentry" href="re02.html" title="neo4j-shell" /><link rel="refentry" href="re03.html" title="neo4j-backup" /><link rel="refentry" href="re04.html" title="neo4j-coordinator" /><link rel="refentry" href="re05.html" title="neo4j-coordinator-shell" /><link rel="appendix" href="questions.html" title="Appendix B. Questions &amp; Answers" /><link rel="subsection" href="query-function.html#_predicates" title="16.23.1. Predicates" /><link rel="subsection" href="query-function.html#_scalar_functions" title="16.23.2. Scalar functions" /><link rel="subsection" href="query-function.html#_iterable_functions" title="16.23.3. Iterable functions" /><link rel="subsection" href="query-function.html#_mathematical_functions" title="16.23.4. Mathematical functions" /><link rel="copyright" href="ln-id464096.html" title="License: Creative Commons 3.0" />


<!-- favicon -->

<link rel="shortcut icon" href="http://neo4j.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://neo4j.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/neo.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushCypher.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>

<!-- activate when needed
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
-->
 
<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Replace SVG for browsers that lack support. -->
<script type="text/javascript" src="js/svgreplacer.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Version -->

<script type="text/javascript" src="js/version.js"></script>

<!-- Offline Sidebar -->

<script type="text/javascript" src="js/sidebar.js"></script>


<div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">The Neo4j Manual</a></span> &gt; <span class="breadcrumb-link"><a href="reference-documentation.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="cypher-query-lang.html">Cypher Query Language</a></span> &gt; <span class="breadcrumb-node">Functions</span></div></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="query-foreach.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="cypher-compatibility.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="query-function"></a>16.23. Functions</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="query-function.html#_predicates">16.23.1. Predicates</a></span></dt><dt><span class="section"><a href="query-function.html#_scalar_functions">16.23.2. Scalar functions</a></span></dt><dt><span class="section"><a href="query-function.html#_iterable_functions">16.23.3. Iterable functions</a></span></dt><dt><span class="section"><a href="query-function.html#_mathematical_functions">16.23.4. Mathematical functions</a></span></dt></dl></div><p>Most functions in Cypher will return null if the input parameter is null.</p><p>Here is a list of the functions in Cypher, seperated into three different sections: Predicates, Scalar functions and Aggregated functions</p><p><span class="emphasis"><em>Graph</em></span></p><div class="informalfigure"><a class="ulink" href="images/cypher-functions-graph.svg" target="_top">
<span class="inlinemediaobject"><img src="images/cypher-functions-graph.svg" alt="cypher-functions-graph.svg" /></span>
</a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_predicates"></a>16.23.1. Predicates</h3></div></div></div><p>Predicates are boolean functions that return true or false for a given set of input.
They are most commonly used to filter out subgraphs in the <code class="literal">WHERE</code> part of a query.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-all"></a>ALL</h4></div></div></div><p>Tests whether a predicate holds for all element of this iterable collection.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">ALL(identifier in iterable WHERE predicate)</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable symbol, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> This is the identifier that can be used from the predicate.
</li><li class="listitem">
<span class="emphasis"><em>predicate:</em></span> A predicate that is tested against all items in iterable
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3), b=node(1)
MATCH p=a-[*1..3]-&gt;b
WHERE all(x in nodes(p)
WHERE x.age &gt; 30)
RETURN p</pre><p>All nodes in the path.</p><div class="queryresult table"><a id="id543171"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">p</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[Node[3]{name:"A",age:38,eyes:"brown"},:KNOWS[1] {},Node[5]{name:"C",age:53,eyes:"green"},:KNOWS[3] {},Node[1]{name:"D",age:54,eyes:"brown"}]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-any"></a>ANY</h4></div></div></div><p>Tests whether a predicate holds for at least one element of this iterable collection.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">ANY(identifier in iterable WHERE predicate)</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable symbol, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> This is the identifier that can be used from the predicate.
</li><li class="listitem">
<span class="emphasis"><em>predicate:</em></span> A predicate that is tested against all items in iterable
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(2)
WHERE any(x in a.array
WHERE x = "one")
RETURN a</pre><p>All nodes in the path.</p><div class="queryresult table"><a id="id543353"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">a</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">Node[2]{name:"E",age:41,eyes:"blue",array:["one","two","three"]}</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-none"></a>NONE</h4></div></div></div><p>Returns true if the predicate holds for no element in the iterable.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">NONE(identifier in iterable WHERE predicate)</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable symbol, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> This is the identifier that can be used from the predicate.
</li><li class="listitem">
<span class="emphasis"><em>predicate:</em></span> A predicate that is tested against all items in iterable
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START n=node(3)
MATCH p=n-[*1..3]-&gt;b
WHERE NONE(x in nodes(p)
WHERE x.age = 25)
RETURN p</pre><p>All nodes in the path.</p><div class="queryresult table"><a id="id543534"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">p</th></tr></thead><tfoot><tr><th align="left" valign="top">2 rows
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[Node[3]{name:"A",age:38,eyes:"brown"},:KNOWS[1] {},Node[5]{name:"C",age:53,eyes:"green"}]</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">[Node[3]{name:"A",age:38,eyes:"brown"},:KNOWS[1] {},Node[5]{name:"C",age:53,eyes:"green"},:KNOWS[3] {},Node[1]{name:"D",age:54,eyes:"brown"}]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-single"></a>SINGLE</h4></div></div></div><p>Returns true if the predicate holds for exactly one of the elements in the iterable.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">SINGLE(identifier in iterable WHERE predicate)</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable symbol, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> This is the identifier that can be used from the predicate.
</li><li class="listitem">
<span class="emphasis"><em>predicate:</em></span> A predicate that is tested against all items in iterable
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START n=node(3)
MATCH p=n--&gt;b
WHERE SINGLE(var in nodes(p)
WHERE var.eyes = "blue")
RETURN p</pre><p>All nodes in the path.</p><div class="queryresult table"><a id="id543730"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">p</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[Node[3]{name:"A",age:38,eyes:"brown"},:KNOWS[0] {},Node[4]{name:"B",age:25,eyes:"blue"}]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_scalar_functions"></a>16.23.2. Scalar functions</h3></div></div></div><p>Scalar functions return a single value.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-length"></a>LENGTH</h4></div></div></div><p>To return or filter on the length of a path, use the special property LENGTH</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">LENGTH( iterable )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An iterable, value or function call
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3)
MATCH p=a--&gt;b--&gt;c
RETURN length(p)</pre><p>The length of the path p.</p><div class="queryresult table"><a id="id543903"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">length(p)</th></tr></thead><tfoot><tr><th align="left" valign="top">3 rows
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">2</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">2</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">2</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-type"></a>TYPE</h4></div></div></div><p>Returns a string representation of the relationship type.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">TYPE( relationship )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>relationship:</em></span> A relationship
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START n=node(3)
MATCH (n)-[r]-&gt;()
RETURN type(r)</pre><p>The relationship type of r.</p><div class="queryresult table"><a id="id544083"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">type(r)</th></tr></thead><tfoot><tr><th align="left" valign="top">2 rows
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">"KNOWS"</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">"KNOWS"</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-id"></a>ID</h4></div></div></div><p>Returns the id of the relationship or node</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">ID( property-container )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>property-container:</em></span> A node or a relationship
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3, 4, 5)
RETURN ID(a)</pre><p>The node id for three nodes.</p><div class="queryresult table"><a id="id544251"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">ID(a)</th></tr></thead><tfoot><tr><th align="left" valign="top">3 rows
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">3</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">4</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">5</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-coalesce"></a>COALESCE</h4></div></div></div><p>Returns the first non-null value in the list of expressions passed to it.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">COALESCE( expression [, expression]* )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> The expression that might return null
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3)
RETURN coalesce(a.hairColour?, a.eyes?)</pre><div class="queryresult table"><a id="id544429"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">coalesce(a.hairColour?, a.eyes?)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">"brown"</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-head"></a>HEAD</h4></div></div></div><p>HEAD returns the first element in a collection.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">HEAD( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> This expression should return a collection of some sort.
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(2)
RETURN a.array, head(a.array)</pre><p>The first node in the path</p><div class="queryresult table"><a id="id544587"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">a.array</th><th align="left" valign="top">head(a.array)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">["one","two","three"]</code></p></td><td align="left" valign="top"><p><code class="literal">"one"</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-last"></a>LAST</h4></div></div></div><p>LAST returns the last element in a collection.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">LAST( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> This expression should return a collection of some sort.
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(2)
RETURN a.array, last(a.array)</pre><p>The first node in the path</p><div class="queryresult table"><a id="id544766"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">a.array</th><th align="left" valign="top">last(a.array)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">["one","two","three"]</code></p></td><td align="left" valign="top"><p><code class="literal">"three"</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_iterable_functions"></a>16.23.3. Iterable functions</h3></div></div></div><p>Iterable functions return an iterable of things - nodes in a path, and so on.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-nodes"></a>NODES</h4></div></div></div><p>Returns all nodes in a path</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">NODES( path )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>path:</em></span> A path
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3), c=node(2)
MATCH p=a--&gt;b--&gt;c
RETURN NODES(p)</pre><p>All the nodes in the path p.</p><div class="queryresult table"><a id="id544958"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">NODES(p)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[Node[3]{name:"A",age:38,eyes:"brown"},Node[4]{name:"B",age:25,eyes:"blue"},Node[2]{name:"E",age:41,eyes:"blue",array:["one","two","three"]}]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-relationships"></a>RELATIONSHIPS</h4></div></div></div><p>Returns all relationships in a path</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">RELATIONSHIPS( path )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>path:</em></span> A path
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3), c=node(2)
MATCH p=a--&gt;b--&gt;c
RETURN RELATIONSHIPS(p)</pre><p>All the nodes in the path p.</p><div class="queryresult table"><a id="id545116"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">RELATIONSHIPS(p)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[:KNOWS[0] {},:MARRIED[4] {}]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-extract"></a>EXTRACT</h4></div></div></div><p>To return a single property, or the value of a function from an iterable of nodes or relationships,
 you can use EXTRACT. It will go through all enitities in the iterable, and run an expression, and return the results
 in an iterable with these values. It works like the <code class="literal">map</code> method in functional languages such as Lisp and Scala.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">EXTRACT( identifier in iterable : expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable identifier, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> The closure will have an identifier introduced in it’s context. Here you decide which identifier to use.
</li><li class="listitem">
<span class="emphasis"><em>expression:</em></span> This expression will run once per value in the iterable, and produces the result iterable.
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3), b=node(4), c=node(1)
MATCH p=a--&gt;b--&gt;c
RETURN extract(n in nodes(p) : n.age)</pre><p>The age property of all nodes in the path.</p><div class="queryresult table"><a id="id545306"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">extract(n in nodes(p) : n.age)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[38,25,54]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-filter"></a>FILTER</h4></div></div></div><p>FILTER returns all the elements in an iterable that comply to a predicate.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">FILTER(identifier in iterable : predicate)</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>iterable:</em></span> An array property, or an iterable symbol, or an iterable function.
</li><li class="listitem">
<span class="emphasis"><em>identifier:</em></span> This is the identifier that can be used from the predicate.
</li><li class="listitem">
<span class="emphasis"><em>predicate:</em></span> A predicate that is tested against all items in iterable
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(2)
RETURN a.array, filter(x in a.array : length(x) = 3)</pre><p>The first node in the path</p><div class="queryresult table"><a id="id545487"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">a.array</th><th align="left" valign="top">filter(x in a.array : length(x) = 3)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">["one","two","three"]</code></p></td><td align="left" valign="top"><p><code class="literal">["one","two"]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-tail"></a>TAIL</h4></div></div></div><p>TAIL returns all but the first element in a collection.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">TAIL( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> This expression should return a collection of some sort.
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(2)
RETURN a.array, tail(a.array)</pre><p>The first node in the path</p><div class="queryresult table"><a id="id545665"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">a.array</th><th align="left" valign="top">tail(a.array)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">["one","two","three"]</code></p></td><td align="left" valign="top"><p><code class="literal">["two","three"]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-range"></a>RANGE</h4></div></div></div><p>Returns numerical values in range [start;end) with non-zero step value step. Range is inclusive in both ends.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">RANGE( start, end [, step] )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>start:</em></span> A numerical expression
</li><li class="listitem">
<span class="emphasis"><em>end:</em></span> A numerical expression
</li><li class="listitem">
<span class="emphasis"><em>step:</em></span> A numerical expression
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START n=node(1)
RETURN range(0,10), range(2,18,3)</pre><p>Two lists of numbers.</p><div class="queryresult table"><a id="id545864"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">range(0,10)</th><th align="left" valign="top">range(2,18,3)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">[0,1,2,3,4,5,6,7,8,9,10]</code></p></td><td align="left" valign="top"><p><code class="literal">[2,5,8,11,14,17]</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mathematical_functions"></a>16.23.4. Mathematical functions</h3></div></div></div><p>These functions all operate on numerical expressions only, and will return an
error if used on any other values.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-abs"></a>ABS</h4></div></div></div><p>Returns the absolute value of a number</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">ABS( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> A numeric expression
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(3), c=node(2)
RETURN a.age, c.age, abs(a.age - c.age)</pre><p>The absolute value of age difference</p><div class="queryresult table"><a id="id546058"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="left" valign="top">a.age</th><th align="left" valign="top">c.age</th><th align="left" valign="top">abs(a.age - c.age)</th></tr></thead><tfoot><tr><th colspan="3" align="left" valign="top">1 row
</th></tr><tr><th colspan="3" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">38</code></p></td><td align="left" valign="top"><p><code class="literal">41</code></p></td><td align="left" valign="top"><p><code class="literal">3.0</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-round"></a>ROUND</h4></div></div></div><p>ROUND returns the numerical expression, rounded to the nearest integer.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">ROUND( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> A numerical expression
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(1)
RETURN round(3.141592)</pre><div class="queryresult table"><a id="id546254"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">round(3.141592)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">3</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-sqrt"></a>SQRT</h4></div></div></div><p>SQRT returns the square root of a number</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">SQRT( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> A numerical expression
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START a=node(1)
RETURN sqrt(256)</pre><p>All the nodes in the path p.</p><div class="queryresult table"><a id="id546411"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /></colgroup><thead><tr><th align="left" valign="top">sqrt(256)</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">16.0</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="functions-sign"></a>SIGN</h4></div></div></div><p>Returns the signum of a number - zero if the expression is zero, -1 for any negative number, and 1 for any positive number.</p><p><span class="strong"><strong>Syntax:</strong></span> <code class="literal">SIGN( expression )</code></p><p><span class="strong"><strong>Arguments:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>expression:</em></span> A numerical expression
</li></ul></div><p><span class="emphasis"><em>Query</em></span></p><pre class="programlisting brush: cypher">START n=node(1)
RETURN sign(-17), sign(0.1)</pre><p>All the nodes in the path p.</p><div class="queryresult table"><a id="id546568"></a><p class="title"><b>Result</b></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left" valign="top">sign(-17)</th><th align="left" valign="top">sign(0.1)</th></tr></thead><tfoot><tr><th colspan="2" align="left" valign="top">1 row
</th></tr><tr><th colspan="2" align="left" valign="top">0 ms</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">-1.0</code></p></td><td align="left" valign="top"><p><code class="literal">1.0</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /></div></div></div><HR xmlns=""></HR><a xmlns="" href="ln-id464096.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2012 Neo Technology</p></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="query-foreach.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="cypher-query-lang.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="cypher-compatibility.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
